<!DOCTYPE html>
<html lang="es">

<head>

 <meta charset="UTF-8">
 <meta name="viewport"
   content="width=device-width">

 <title>Modificar</title>

 <script type="module" src="lib/js/consumeJson.js"></script>
 <script type="module" src="lib/js/submitForm.js"></script>
 <script type="module" src="lib/js/muestraObjeto.js"></script>
 <script type="module" src="lib/js/muestraError.js"></script>

 <script>
  // Obtiene los parámetros de la página.
  const params = new URL(location.href).searchParams
 </script>

<link
href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
rel="stylesheet"
integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
crossorigin="anonymous"
/>

</head>

<body onload="if (params.size > 0) {
   consumeJson('srv/servicio.php?' + params)
    .then(respuesta => muestraObjeto(forma, respuesta.body))
    .catch(muestraError)
  }">

 <form id="forma" onsubmit="submitForm('srv/servicio-modifica.php', event)
    .then(respuesta => location.href = 'index.html')
    .catch(muestraError)">

  <h1 style="margin-left: 1rem;">Modificar</h1>


  <div style="margin-top: 2rem; margin-left: 2rem;">
    <button type="button" class="btn btn-outline-danger"> <a href="index.html" style="text-decoration: none;">Cancelar</a> </button>
  </div>

  <div class="card" style="width: 18rem; margin-left: 2rem; margin-top: 1rem;">
    <div style="margin-top: 1rem; margin-left: 1rem;">
    
      <input name="id" type="hidden">
    
      <p>
       <label>
        Nombre
        <input name="nombre" value="Cargando&hellip;">
       </label>
      </p>
    
      <p>* Obligatorio</p>
    
      <p>
       <label>
       Descripcion
        <input name="descripcion" value="Cargando&hellip;">
       </label>
      </p>
    
      <p>* Obligatorio</p>
    
      <p>
       <label>
        Tipo
        <input name="tipo" value="Cargando&hellip;">
       </label>
      </p>
    
      <p>* Obligatorio</p>
    
      <p>
    
       <button class="btn btn-outline-success" type="submit">Guardar</button>
    
       <button class="btn btn-outline-danger" type="button" onclick="
         if (params.size > 0 && confirm('Confirma la eliminación')) {
          consumeJson('srv/servicio-elimina.php?' + params)
           .then(() => location.href = 'index.html')
           .catch(muestraError)
         }">
        Eliminar
       </button>
    
      </p>
    </div>
  </div>

 </form>
  <!-- script -->
  <script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
  crossorigin="anonymous"
></script>
</body>

</html>